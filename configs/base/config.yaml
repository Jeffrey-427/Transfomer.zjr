# ===== Paths =====
data:
  train_bi:  "D:\\iwslt17\\bi\\train_bi.jsonl"
  dev_en_de: "D:\\iwslt17\\bi\\dev_en-de.jsonl"
  dev_de_en: "D:\\iwslt17\\bi\\dev_de-en.jsonl"
  test_en_de: "D:\\iwslt17\\bi\\test_en-de.jsonl"
  test_de_en: "D:\\iwslt17\\bi\\test_de-en.jsonl"
  spm_model: "D:\\iwslt17\\bi\\spm.model"

# ===== Special token ids =====
special_ids:
  pad_id: 0
  bos_id: 1
  eos_id: 2
  unk_id: 3
  lang_tag_en: "<2en>"
  lang_tag_de: "<2de>"

# ===== Model =====
model:
  d_model: 512
  nhead: 8
  dim_ff: 2048
  num_encoder_layers: 4
  num_decoder_layers: 4
  dropout: 0.1
  share_embeddings: true
  tie_softmax: true
  max_src_len: 128
  max_tgt_len: 128

# ===== Train =====
train:
  seed: 3407
  epochs: 10
  batch_size: 64
  lr_factor: 2.0
  warmup_steps: 4000
  label_smoothing: 0.1
  grad_clip: 1.0
  amp: true
  log_every: 200
  save_dir: "D:\\iwslt17\\runs\\run1"

# ===== Inference =====
infer:
  max_gen_len: 128
  beam_size: 1
  lenpen: 0.6

# ===== Logging (new) =====
logging:
  bleu_sample_size: 8         # 每个 batch 抽最多 8 条做快速 BLEU
  sample_print_every: 200     # 每 200 步打印 1 个样例（避免刷屏）
